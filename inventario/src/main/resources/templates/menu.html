<!doctype html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security6">
<head th:replace="~{fragmentos/_head :: head('Menú')}"></head>
<body>

  <!-- Sidebar fija -->
  <aside class="sidebar-fixed" th:replace="~{fragmentos/_barra_lateral :: barra_lateral}"></aside>

  <!-- Contenido desplazado por sidebar -->
  <div class="wrapper">

    <!-- Topbar centrada al ancho de página -->
    <div class="header-band" th:replace="~{fragmentos/_barra_superior :: barra_superior}"></div>

    <!-- Página centrada -->
    <main class="page px-4">

      <!-- Resumen del día -->
      <section class="space-y-4">
        <h2 class="text-xl font-semibold">
          Resumen del día
        </h2>

        <!-- 3 columnas en pantallas grandes, se adapta sin dejar huecos -->
        <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3">
          <div class="sf-card p-4 text-center">
            <h3 class="font-medium mb-1">Ventas</h3>
            <p class="text-2xl font-semibold" style="color:#2563eb;"
               th:text="${ventasCount}">0</p>
            <p class="text-sm text-gray-500"
               th:text="${'Total: $' + #numbers.formatDecimal(ventasTotal, 0, 'POINT', 2, 'COMMA')}">
              Total: $0.00
            </p>
          </div>

          <div class="sf-card p-4 text-center">
            <h3 class="font-medium mb-1">Compras</h3>
            <p class="text-2xl font-semibold" style="color:#2563eb;"
               th:text="${comprasCount}">0</p>
            <p class="text-sm text-gray-500"
               th:text="${'Total: $' + #numbers.formatDecimal(comprasTotal, 0, 'POINT', 2, 'COMMA')}">
              Total: $0.00
            </p>
          </div>

          <div class="sf-card p-4 text-center">
            <h3 class="font-medium mb-1">Pagos</h3>
            <p class="text-2xl font-semibold" style="color:#2563eb;"
               th:text="${pagosCount}">0</p>
            <p class="text-sm text-gray-500"
               th:text="${'Total: $' + #numbers.formatDecimal(pagosTotal, 0, 'POINT', 2, 'COMMA')}">
              Total: $0.00
            </p>
          </div>
        </div>
      </section>

      <!-- Acciones disponibles -->
      <section class="space-y-4 mt-4">
        <h2 class="text-xl font-semibold">Acciones disponibles</h2>

        <!-- Grilla fluida sin “columna fantasma”: -->
        <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3">

          <!-- Comunes -->
          <a th:href="@{/ventas}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Registrar venta</h3>
            <p class="text-sm" style="color:#6b7280;">Crear y consultar ventas del día.</p>
          </a>

          <a th:href="@{/compras}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Registrar compra</h3>
            <p class="text-sm" style="color:#6b7280;">Ingresar compras y actualizar inventario.</p>
          </a>

          <a th:href="@{/inventario}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Inventario</h3>
            <p class="text-sm" style="color:#6b7280;">Ver stock y alertas de bajo inventario.</p>
          </a>

          <!-- Solo ADMIN -->
          <a sec:authorize="hasRole('ADMIN')" th:href="@{/proveedores}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Gestionar proveedores</h3>
            <p class="text-sm" style="color:#6b7280;">Registrar y eliminar proveedores.</p>
          </a>

          <a sec:authorize="hasRole('ADMIN')" th:href="@{/clientes}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Gestionar clientes</h3>
            <p class="text-sm" style="color:#6b7280;">Registrar y eliminar clientes.</p>
          </a>

          <a sec:authorize="hasRole('ADMIN')" th:href="@{/config}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Configuración</h3>
            <p class="text-sm" style="color:#6b7280;">Usuarios, contraseñas y seguridad.</p>
          </a>

          <!-- Solo SECRETARIA -->
          <a sec:authorize="hasRole('SECRETARIA')" th:href="@{/ventas}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Modificar ventas</h3>
            <p class="text-sm" style="color:#6b7280;">Editar ventas por fecha/cliente.</p>
          </a>

          <a sec:authorize="hasRole('SECRETARIA')" th:href="@{/compras}" class="sf-card p-4 block">
            <h3 class="font-medium mb-1">Modificar compras</h3>
            <p class="text-sm" style="color:#6b7280;">Editar compras por fecha/proveedor.</p>
          </a>

        </div>
      </section>

    </main><!-- /.page -->
  </div><!-- /.wrapper -->
</body>
</html>
